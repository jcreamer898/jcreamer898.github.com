{"componentChunkName":"component---src-templates-post-tsx","path":"/fetching-data-in-a-universal-react-router-app-with-async-actions/","webpackCompilationHash":"15a94da24f4bdabb5d4c","result":{"data":{"logo":null,"markdownRemark":{"html":"<p>One of the most difficult things when working in a universal app is fetching data on the client side. With es2017 and the React lifecycle, it can be done easily.</p>\n<p>I love <code class=\"language-text\">async</code> and <code class=\"language-text\">await</code> in <a href=\"http://www.2ality.com/2016/02/async-functions.html\">es2017</a>. If you haven’t started using them yet. Do it NAOW.</p>\n<p>It even works in a lot of browsers natively now too! Including Microsoft Edge, Chrome, and node version 8… <a href=\"http://kangax.github.io/compat-table/es2016plus/#test-async_functions\">http://kangax.github.io/compat-table/es2016plus/#test-async_functions</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 405px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b52f3a24a40440fcbc3b855bf30e801/6f6c6/asyncarnold.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAADBAL/2gAMAwEAAhADEAAAAcaqStuZ2WjaJJzxij//xAAcEAACAgIDAAAAAAAAAAAAAAAAAgEDEBMREiH/2gAIAQEAAQUC2ubLTc5ydsR7beiLXEn/xAAaEQADAQADAAAAAAAAAAAAAAAAAQISETJR/9oACAEDAQE/AbhbRifCuwm+D//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8BrKxZ/8QAHRAAAQMFAQAAAAAAAAAAAAAAAQAhkQIQESBBUf/aAAgBAQAGPwJsQuQuRoAfU1AFv//EABsQAAIDAQEBAAAAAAAAAAAAAAERACExURCh/9oACAEBAAE/IeqoWYRMO95nT5wANhDvggEYSoYOHocIp//aAAwDAQACAAMAAAAQ4Pi+/8QAGREBAQADAQAAAAAAAAAAAAAAAQARITFh/9oACAEDAQE/EAgGnt5pqM2M3f/EABgRAQEBAQEAAAAAAAAAAAAAAAEAETFh/9oACAECAQE/EDBvS4kNv//EAB4QAQEAAgICAwAAAAAAAAAAAAERACExgRBRYbHB/9oACAEBAAE/EFZBDbQHWaEqr7TWKSknw/mWbgkxKqKkNTwRhwVwl4xCl5ap25qXc95//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"asyncarnold\"\n        title=\"asyncarnold\"\n        src=\"/static/1b52f3a24a40440fcbc3b855bf30e801/6f6c6/asyncarnold.jpg\"\n        srcset=\"/static/1b52f3a24a40440fcbc3b855bf30e801/e33f8/asyncarnold.jpg 293w,\n/static/1b52f3a24a40440fcbc3b855bf30e801/6f6c6/asyncarnold.jpg 405w\"\n        sizes=\"(max-width: 405px) 100vw, 405px\"\n      />\n  </a>\n    </span></p>\n<p>Fetching data after a route transition in React Router can be confusing at first, but there’s a fairly easy solution using the React lifecyle event <code class=\"language-text\">componentDidMount</code>. If you’re working with a universal app, when you hit a component straight at it’s url, say <code class=\"language-text\">/me/friends</code>, you’ll already have the data via the initial state. But, when you come to that page via a client side react router render, how do you grab the data?</p>\n<p>For example, on <a href=\"http://www.lonelyplanet.com/usa/nashville/restaurants/a/poi-eat/362228\">http://www.lonelyplanet.com/usa/nashville/restaurants/a/poi-eat/362228</a> you’ll get a list of some of the best places to eat in Nashville. The list was rendered on the server side.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/182da031531f8ce35e92f5b8f8b46177/10714/list-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.42028985507245%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB20lEQVQ4y3VUS67UMBDMSbgTCy7CJVhwCDYs2LNGILFigxBixQaN9Bjm8zJjO3bib4ruTgye6E1LrfHEdnVXVyVdSgkxRoQQJHPOKKVgnmdwDD7h+4PGXk2oEXOBCxneB0m+P01e7nSJACKBhsjACZnAWkAfM36dHS42yH9+XsqMRGe4eE2+K4DOR4whYYpL1uDNCro+uSl0L7rBWmhjJK11KHxhBatZNiBzU7AtIB1m75F4dmV+svqCP2PUF/R9j7weYZo8f46yjkk6PB+O2P/eyxzrRqXWUnz78gVePX+Gbx/frCAZZhhIyIiBmLEwAujGiTYsmDpvWOdkzfQ5x2lR9+uH9/jy7jUefnxaAKlDpbR06dz4v8OtCO3ctl22U+QRmTGS2rdnuklrZJohPRc73AvuKKcoVDlSyiSkJbvFm4a64+EEQwpPJM5I9DnZpJxMtxq2KlTXPDNFgAPRtXSHf9nTHRvZhyjD5fQELG9ACP/ehNp5a5NIHV4HB21HGEpFawHEXJbKq7/uxdZ3gQBPaoAisN5ZnLWRMXSPfw5wJD+LwN7aivOUeRcfFunudFHYqR47cyKhCJC5s23YLmyT1jLVNtUSLTjT2+srPu9+4ng1eDSaPhoJfwE2vUYD0tnAYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"list 1\"\n        title=\"list 1\"\n        src=\"/static/182da031531f8ce35e92f5b8f8b46177/913fc/list-1.png\"\n        srcset=\"/static/182da031531f8ce35e92f5b8f8b46177/bc34b/list-1.png 293w,\n/static/182da031531f8ce35e92f5b8f8b46177/da9f0/list-1.png 585w,\n/static/182da031531f8ce35e92f5b8f8b46177/913fc/list-1.png 1170w,\n/static/182da031531f8ce35e92f5b8f8b46177/10714/list-1.png 1380w\"\n        sizes=\"(max-width: 1170px) 100vw, 1170px\"\n      />\n  </a>\n    </span></p>\n<p>Now when I click <a href=\"https://www.lonelyplanet.com/usa/nashville/restaurants/hattie-bs/a/poi-eat/1513072/362228\">Hattie B’s</a>, we’re going to use React Router to transition to a detail page for Hattie B’s.</p>\n<p>All of that rendering will be done on the client side.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/96e6e/hattieb.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.9110452186805%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADHklEQVQ4y32UbWiTVxTH83F+EBQEEadTKyLUFi34QcR3mcx1IsMPKtpNfA+iUGW+QPXTEOwYyhisWnDbh43NgFYQQcbYukZBKdbYpmnQ+rK0SZonbfrkeZLnNb/de5N2bcUe+HNPTu79n3Of8z834DgOlmULWAqe6+J5HqVSCWmW6/N3XCM6qDNmnl/CsDws26FQLOI4LmahgCvOBoqOR8F2sURQrhKu5yMYFann++SLjoqXhF+qxF3h+wIyuV/xZTzgi2x+6X/I7GOH3mfT/ReobBHZvXH4Iqu0oYxG1/Monc96iPT0EX/RLyrx5O7xpFMRmC6bNC2Z5vWbBIPJFKm09k6VU2+jKnTtIqnoQwYi7fz7LMzbrg56w3/R8ccDYj1PRRdMskNJzLxG1ujHtHLl5lRuMqlCGRhJDtD8eR03dq/mcv1ymrYv5/yu7VTN+ZDg/o10/36Gf25f5dGdbwj/eR2tkJRfCdM0sW17ErEiLAwkCe37jJ8P1fL1p4to3rmYbwUaN3/Ezea9xO+f5lpwLaHTq/np0hFisbeKwDTLUnEnSK1c4UCKa3s2cXHDbELHVvL0wjJOrvyAlgO19P5Qz+u2IL3tTbRd2UpLcAXdXWFFaBgGUscKgnScMCMIWw9vJFg9g9a91XQ2reJ43SyCa+YSOrCEtsNVxFrrST8+SuP+Gtrv3VWEeVGhIzU7oVGKMDc8ytkt6/hiaYBTgqTtWC3N9QtoqJnJd7vm88uXVfx6aDGJ3zZwt+UTOsKPFcFITleCfocwn0zw/dlz7N6ynlUL5nDjYB1nNi2kZt4sGrct4ceGWlp2VHPrxMeEvmrgZcdDRaAbokLXE5NVhmyUIvRci7yhkxoUMxuJ8DLWTV93hCedXcSjPaTjfaSjcVKxV2QSGdzcCLIus2gRS2g870+Q1XU1spOEbTs2hvguebOIUSiK4Re/CxY5w0QXj8CokIlXKl9RXtWWD4vY46oqfTW6gYmqN8RBOW7Z4WHSQxkyWlb5mlyz5VV2tDys08zyGGFeyCA7PIKu58mN6oxKVHwZk5DP1dTpmIj/AFNFadL4Uq64AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hattieb\"\n        title=\"hattieb\"\n        src=\"/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/913fc/hattieb.png\"\n        srcset=\"/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/bc34b/hattieb.png 293w,\n/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/da9f0/hattieb.png 585w,\n/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/913fc/hattieb.png 1170w,\n/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/96e6e/hattieb.png 1349w\"\n        sizes=\"(max-width: 1170px) 100vw, 1170px\"\n      />\n  </a>\n    </span></p>\n<p>This is all done via the client side, and no full page render happens. Somehow though, we have to get the JSON data for Hattie B’s so React has the data to render.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// user.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Poi <span class=\"token keyword\">from</span> <span class=\"token string\">\"./poi\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fetchPoi <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./actions\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Restaurant</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>poi<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">fetchPoi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Poi poi<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>poi<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  poi<span class=\"token punctuation\">:</span> state<span class=\"token punctuation\">.</span>poi<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapDispatchToProps</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">dispatch</span> <span class=\"token operator\">=></span> <span class=\"token function\">bindActionCreators</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  fetchPoi<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> connected <span class=\"token operator\">=</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">,</span> mapDispatchToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Restaurant<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> connected <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The <code class=\"language-text\">componentDidMount</code> method only fires when the component renders on the client side. This means if you go directly to the Hattie B’s page, the data will already have been fetch server side, so the <code class=\"language-text\">this.props.poi</code> will already be defined and passed through the page’s <code class=\"language-text\">intitialState</code>.</p>\n<p>However, when you come to the detail page via the list, the POI will be empty because it hasn’t been fetch yet. Now we can talk about how to use <code class=\"language-text\">async</code> and <code class=\"language-text\">await</code> from <code class=\"language-text\">es2017</code> to create a nice clean actionCreator. Make sure you have <code class=\"language-text\">babel-polyfill</code>, and either <code class=\"language-text\">babel-env</code> or <code class=\"language-text\">babel-preset-es2017</code> available to be able to use the <code class=\"language-text\">async await</code> goodies.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createAction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"redux-actions\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">FETCH_POI</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"FETCH_POI\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">FETCH_POI_DONE</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"FETCH_POI_DONE\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> fetchPoiAction <span class=\"token operator\">=</span> <span class=\"token function\">createAction</span><span class=\"token punctuation\">(</span><span class=\"token constant\">FETCH_POI</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> fetchPoiDoneAction <span class=\"token operator\">=</span> <span class=\"token function\">createAction</span><span class=\"token punctuation\">(</span><span class=\"token constant\">FETCH_POI_DONE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchPoi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchPoiAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/path/to/poi.json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> poi <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchPoiDoneAction</span><span class=\"token punctuation\">(</span>poi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  fetchPoi<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>So here we create an <code class=\"language-text\">async</code> arrow function. We can use <code class=\"language-text\">redux-thunk</code> to get <code class=\"language-text\">dispatch</code> passed in as an argument. Then use the new <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\">fetch</a> API to <code class=\"language-text\">await</code> for the <code class=\"language-text\">response</code>, <code class=\"language-text\">await</code> for the JSON to be downloaded, and then dispatch the final data so the reducer can add the POI to the state.</p>\n<p>From their <code class=\"language-text\">connect</code> simply passes the POI into the component.</p>\n<h3>Conclusion</h3>\n<p>Hopefully if you’re working on a universal app with React Router, this will help you get your components loaded with data on the client side. Universal apps can definitely be tricky, but in the end, they’re extremely powerful and fun to work with!</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"One of the most difficult things when working in a universal app is fetching data on the client side. With es2017 and the React lifecycle, it can be done easily."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I love "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" in "},{"type":"element","tagName":"a","properties":{"href":"http://www.2ality.com/2016/02/async-functions.html"},"children":[{"type":"text","value":"es2017"}]},{"type":"text","value":". If you haven’t started using them yet. Do it NAOW."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It even works in a lot of browsers natively now too! Including Microsoft Edge, Chrome, and node version 8… "},{"type":"element","tagName":"a","properties":{"href":"http://kangax.github.io/compat-table/es2016plus/#test-async_functions"},"children":[{"type":"text","value":"http://kangax.github.io/compat-table/es2016plus/#test-async_functions"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 405px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1b52f3a24a40440fcbc3b855bf30e801/6f6c6/asyncarnold.jpg","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAADBAL/2gAMAwEAAhADEAAAAcaqStuZ2WjaJJzxij//xAAcEAACAgIDAAAAAAAAAAAAAAAAAgEDEBMREiH/2gAIAQEAAQUC2ubLTc5ydsR7beiLXEn/xAAaEQADAQADAAAAAAAAAAAAAAAAAQISETJR/9oACAEDAQE/AbhbRifCuwm+D//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8BrKxZ/8QAHRAAAQMFAQAAAAAAAAAAAAAAAQAhkQIQESBBUf/aAAgBAQAGPwJsQuQuRoAfU1AFv//EABsQAAIDAQEBAAAAAAAAAAAAAAERACExURCh/9oACAEBAAE/IeqoWYRMO95nT5wANhDvggEYSoYOHocIp//aAAwDAQACAAMAAAAQ4Pi+/8QAGREBAQADAQAAAAAAAAAAAAAAAQARITFh/9oACAEDAQE/EAgGnt5pqM2M3f/EABgRAQEBAQEAAAAAAAAAAAAAAAEAETFh/9oACAECAQE/EDBvS4kNv//EAB4QAQEAAgICAwAAAAAAAAAAAAERACExgRBRYbHB/9oACAEBAAE/EFZBDbQHWaEqr7TWKSknw/mWbgkxKqKkNTwRhwVwl4xCl5ap25qXc95//9k='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"asyncarnold","title":"asyncarnold","src":"/static/1b52f3a24a40440fcbc3b855bf30e801/6f6c6/asyncarnold.jpg","srcSet":["/static/1b52f3a24a40440fcbc3b855bf30e801/e33f8/asyncarnold.jpg 293w","/static/1b52f3a24a40440fcbc3b855bf30e801/6f6c6/asyncarnold.jpg 405w"],"sizes":["(max-width:","405px)","100vw,","405px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Fetching data after a route transition in React Router can be confusing at first, but there’s a fairly easy solution using the React lifecyle event "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"componentDidMount"}]},{"type":"text","value":". If you’re working with a universal app, when you hit a component straight at it’s url, say "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/me/friends"}]},{"type":"text","value":", you’ll already have the data via the initial state. But, when you come to that page via a client side react router render, how do you grab the data?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For example, on "},{"type":"element","tagName":"a","properties":{"href":"http://www.lonelyplanet.com/usa/nashville/restaurants/a/poi-eat/362228"},"children":[{"type":"text","value":"http://www.lonelyplanet.com/usa/nashville/restaurants/a/poi-eat/362228"}]},{"type":"text","value":" you’ll get a list of some of the best places to eat in Nashville. The list was rendered on the server side."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/182da031531f8ce35e92f5b8f8b46177/10714/list-1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 69.42028985507245%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB20lEQVQ4y3VUS67UMBDMSbgTCy7CJVhwCDYs2LNGILFigxBixQaN9Bjm8zJjO3bib4ruTgye6E1LrfHEdnVXVyVdSgkxRoQQJHPOKKVgnmdwDD7h+4PGXk2oEXOBCxneB0m+P01e7nSJACKBhsjACZnAWkAfM36dHS42yH9+XsqMRGe4eE2+K4DOR4whYYpL1uDNCro+uSl0L7rBWmhjJK11KHxhBatZNiBzU7AtIB1m75F4dmV+svqCP2PUF/R9j7weYZo8f46yjkk6PB+O2P/eyxzrRqXWUnz78gVePX+Gbx/frCAZZhhIyIiBmLEwAujGiTYsmDpvWOdkzfQ5x2lR9+uH9/jy7jUefnxaAKlDpbR06dz4v8OtCO3ctl22U+QRmTGS2rdnuklrZJohPRc73AvuKKcoVDlSyiSkJbvFm4a64+EEQwpPJM5I9DnZpJxMtxq2KlTXPDNFgAPRtXSHf9nTHRvZhyjD5fQELG9ACP/ehNp5a5NIHV4HB21HGEpFawHEXJbKq7/uxdZ3gQBPaoAisN5ZnLWRMXSPfw5wJD+LwN7aivOUeRcfFunudFHYqR47cyKhCJC5s23YLmyT1jLVNtUSLTjT2+srPu9+4ng1eDSaPhoJfwE2vUYD0tnAYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"list 1","title":"list 1","src":"/static/182da031531f8ce35e92f5b8f8b46177/913fc/list-1.png","srcSet":["/static/182da031531f8ce35e92f5b8f8b46177/bc34b/list-1.png 293w","/static/182da031531f8ce35e92f5b8f8b46177/da9f0/list-1.png 585w","/static/182da031531f8ce35e92f5b8f8b46177/913fc/list-1.png 1170w","/static/182da031531f8ce35e92f5b8f8b46177/10714/list-1.png 1380w"],"sizes":["(max-width:","1170px)","100vw,","1170px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now when I click "},{"type":"element","tagName":"a","properties":{"href":"https://www.lonelyplanet.com/usa/nashville/restaurants/hattie-bs/a/poi-eat/1513072/362228"},"children":[{"type":"text","value":"Hattie B’s"}]},{"type":"text","value":", we’re going to use React Router to transition to a detail page for Hattie B’s."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All of that rendering will be done on the client side."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/96e6e/hattieb.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 79.9110452186805%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADHklEQVQ4y32UbWiTVxTH83F+EBQEEadTKyLUFi34QcR3mcx1IsMPKtpNfA+iUGW+QPXTEOwYyhisWnDbh43NgFYQQcbYukZBKdbYpmnQ+rK0SZonbfrkeZLnNb/de5N2bcUe+HNPTu79n3Of8z834DgOlmULWAqe6+J5HqVSCWmW6/N3XCM6qDNmnl/CsDws26FQLOI4LmahgCvOBoqOR8F2sURQrhKu5yMYFann++SLjoqXhF+qxF3h+wIyuV/xZTzgi2x+6X/I7GOH3mfT/ReobBHZvXH4Iqu0oYxG1/Monc96iPT0EX/RLyrx5O7xpFMRmC6bNC2Z5vWbBIPJFKm09k6VU2+jKnTtIqnoQwYi7fz7LMzbrg56w3/R8ccDYj1PRRdMskNJzLxG1ujHtHLl5lRuMqlCGRhJDtD8eR03dq/mcv1ymrYv5/yu7VTN+ZDg/o10/36Gf25f5dGdbwj/eR2tkJRfCdM0sW17ErEiLAwkCe37jJ8P1fL1p4to3rmYbwUaN3/Ezea9xO+f5lpwLaHTq/np0hFisbeKwDTLUnEnSK1c4UCKa3s2cXHDbELHVvL0wjJOrvyAlgO19P5Qz+u2IL3tTbRd2UpLcAXdXWFFaBgGUscKgnScMCMIWw9vJFg9g9a91XQ2reJ43SyCa+YSOrCEtsNVxFrrST8+SuP+Gtrv3VWEeVGhIzU7oVGKMDc8ytkt6/hiaYBTgqTtWC3N9QtoqJnJd7vm88uXVfx6aDGJ3zZwt+UTOsKPFcFITleCfocwn0zw/dlz7N6ynlUL5nDjYB1nNi2kZt4sGrct4ceGWlp2VHPrxMeEvmrgZcdDRaAbokLXE5NVhmyUIvRci7yhkxoUMxuJ8DLWTV93hCedXcSjPaTjfaSjcVKxV2QSGdzcCLIus2gRS2g870+Q1XU1spOEbTs2hvguebOIUSiK4Re/CxY5w0QXj8CokIlXKl9RXtWWD4vY46oqfTW6gYmqN8RBOW7Z4WHSQxkyWlb5mlyz5VV2tDys08zyGGFeyCA7PIKu58mN6oxKVHwZk5DP1dTpmIj/AFNFadL4Uq64AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"hattieb","title":"hattieb","src":"/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/913fc/hattieb.png","srcSet":["/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/bc34b/hattieb.png 293w","/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/da9f0/hattieb.png 585w","/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/913fc/hattieb.png 1170w","/static/b1e51c2d5bda6b53bc7d0062b4bdb6fd/96e6e/hattieb.png 1349w"],"sizes":["(max-width:","1170px)","100vw,","1170px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This is all done via the client side, and no full page render happens. Somehow though, we have to get the JSON data for Hattie B’s so React has the data to render."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// user.js"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" React "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"react\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" connect "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"react-redux\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" Poi "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"./poi\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" fetchPoi "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"./actions\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Restaurant"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Component"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"componentDidMount"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"!"}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"props"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"poi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"props"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"fetchPoi"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"render"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Poi poi"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"props"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"poi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function-variable","function"]},"children":[{"type":"text","value":"mapStateToProps"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"state"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  poi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" state"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"poi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function-variable","function"]},"children":[{"type":"text","value":"mapDispatchToProps"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"dispatch"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"bindActionCreators"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  fetchPoi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" dispatch"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" connected "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"connect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"mapStateToProps"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" mapDispatchToProps"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"Restaurant"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" connected "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"componentDidMount"}]},{"type":"text","value":" method only fires when the component renders on the client side. This means if you go directly to the Hattie B’s page, the data will already have been fetch server side, so the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"this.props.poi"}]},{"type":"text","value":" will already be defined and passed through the page’s "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"intitialState"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"However, when you come to the detail page via the list, the POI will be empty because it hasn’t been fetch yet. Now we can talk about how to use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" from "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"es2017"}]},{"type":"text","value":" to create a nice clean actionCreator. Make sure you have "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"babel-polyfill"}]},{"type":"text","value":", and either "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"babel-env"}]},{"type":"text","value":" or "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"babel-preset-es2017"}]},{"type":"text","value":" available to be able to use the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"async await"}]},{"type":"text","value":" goodies."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"js"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" createAction "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"redux-actions\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"FETCH_POI"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"FETCH_POI\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"FETCH_POI_DONE"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"FETCH_POI_DONE\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" fetchPoiAction "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createAction"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"FETCH_POI"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" fetchPoiDoneAction "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createAction"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"FETCH_POI_DONE"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function-variable","function"]},"children":[{"type":"text","value":"fetchPoi"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"fetchPoiAction"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" response "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"fetch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/path/to/poi.json\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" poi "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" response"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"json"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"dispatch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"fetchPoiDoneAction"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"poi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  fetchPoi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So here we create an "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" arrow function. We can use "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"redux-thunk"}]},{"type":"text","value":" to get "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"dispatch"}]},{"type":"text","value":" passed in as an argument. Then use the new "},{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" API to "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" for the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"response"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" for the JSON to be downloaded, and then dispatch the final data so the reducer can add the POI to the state."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"From their "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"connect"}]},{"type":"text","value":" simply passes the POI into the component."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Conclusion"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hopefully if you’re working on a universal app with React Router, this will help you get your components loaded with data on the client side. Universal apps can definitely be tricky, but in the end, they’re extremely powerful and fun to work with!"}]}],"data":{"quirksMode":false}},"excerpt":"One of the most difficult things when working in a universal app is fetching data on the client side. With es2017 and the React lifecycle…","timeToRead":3,"frontmatter":{"title":"Fetching data in a universal react router app with async actions","userDate":"31 January 2017","date":"2017-01-31T00:00:00.000Z","tags":["react","react-router","async","ajax","isomorphic","redux"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBP/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAATxsRorSH//EABkQAAMBAQEAAAAAAAAAAAAAAAABEQMCEv/aAAgBAQABBQLrZidJTQWdPHR//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/AYyP/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8BV//EABoQAAICAwAAAAAAAAAAAAAAAAABEBEhMWH/2gAIAQEABj8CfcDNKLTj/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFRgf/aAAgBAQABPyER0uksYBv2K0pAJZ2YUk8t+1P/2gAMAwEAAgADAAAAEPvP/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERQWH/2gAIAQMBAT8Qi6Nz/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxCRYUf/xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMYFRcdH/2gAIAQEAAT8Qd15Z1g1sBF8eveNiQJYN7zfg5jgz2bjuOCkMGr8M/9k=","aspectRatio":1.3333333333333333,"src":"/static/8f6dc4864de83757941b42a584356766/4c8c0/hattiebschicken.jpg","srcSet":"/static/8f6dc4864de83757941b42a584356766/f8f18/hattiebschicken.jpg 930w,\n/static/8f6dc4864de83757941b42a584356766/0e6ff/hattiebschicken.jpg 1860w,\n/static/8f6dc4864de83757941b42a584356766/4c8c0/hattiebschicken.jpg 3264w","sizes":"(max-width: 3264px) 100vw, 3264px"}}},"author":{"id":"Jonathan Creamer","bio":"Me","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEEBQL/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgD/2gAMAwEAAhADEAAAActrV9qLdVM0grsJ/8QAHBAAAwACAwEAAAAAAAAAAAAAAAECAxESExQx/9oACAEBAAEFAtbdQ5FyPOoJ1WXoPpeNEU5X/8QAFREBAQAAAAAAAAAAAAAAAAAAIEH/2gAIAQMBAT8Bg//EABURAQEAAAAAAAAAAAAAAAAAACBB/9oACAECAQE/AaP/xAAcEAACAgIDAAAAAAAAAAAAAAAAAREhEBIyQXH/2gAIAQEABj8CotM7NtlRDcenNYkhH//EABsQAAMBAQEBAQAAAAAAAAAAAAABESExQXHh/9oACAEBAAE/IXEtXFgxiH0acye99GW89b0r9BdUt7tg/OxM/9oADAMBAAIAAwAAABC00Lz/xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEDAQE/EAKdXv8A/8QAGBEBAQADAAAAAAAAAAAAAAAAAQAQETH/2gAIAQIBAT8QeC0Rj//EABwQAQEBAAIDAQAAAAAAAAAAAAERACFhMUFRcf/aAAgBAQABPxBlr4D8ayj6BhEYHiXTraYESvzrU3hwXOlcQIp9N4SRFRE4TNcD0niU0SUxTo3/2Q==","width":400,"height":400,"src":"/static/7939bd0f614e75f5bf8544668e3f2971/f4032/me.jpg","srcSet":"/static/7939bd0f614e75f5bf8544668e3f2971/f4032/me.jpg 1x,\n/static/7939bd0f614e75f5bf8544668e3f2971/9429d/me.jpg 1.5x,\n/static/7939bd0f614e75f5bf8544668e3f2971/67481/me.jpg 2x"}}]}}}},"relatedPosts":{"totalCount":2,"edges":[{"node":{"id":"7ab64028-19e1-5269-b8e3-d1dc546c5b10","timeToRead":3,"excerpt":"One of the most difficult things when working in a universal app is fetching data on the client side. With es2017 and the React lifecycle…","frontmatter":{"title":"Fetching data in a universal react router app with async actions"},"fields":{"slug":"/fetching-data-in-a-universal-react-router-app-with-async-actions/"}}},{"node":{"id":"cca95ce8-a514-54ec-8da7-6d0659284a0e","timeToRead":1,"excerpt":"We’ve been integrating TypeScript more and more into our workflow at Lonely Planet. I wanted to just quickly share how easy it is to get…","frontmatter":{"title":"Getting started with TypeScript, WebPack, and React"},"fields":{"slug":"/getting-started-with-typescript-webpack-and-react/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/fetching-data-in-a-universal-react-router-app-with-async-actions/","prev":{"excerpt":"As a front end infra engineer, you’ll use the heck out of WebPack. It’s an incredibly powerful tool. Sometimes it takes a while though. I…","timeToRead":1,"frontmatter":{"title":"Advanced WebPack Part 3 - Creating a custom notifier plugin","tags":["webpack","plugin","package"],"date":"2016-06-08T00:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":0.6669921875,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAMEAQIF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAgMEAf/aAAwDAQACEAMQAAABgCLzLRhkr7izsKpsv//EAB0QAAIBBAMAAAAAAAAAAAAAAAABAgMREhMQITL/2gAIAQEAAQUC2NG1mbLPhZkX1kxU42j5HWuf/8QAGREAAwADAAAAAAAAAAAAAAAAAAECEBIy/9oACAEDAQE/AUsRyjWj/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEREDH/2gAIAQIBAT8BuPpUf//EAB0QAAEDBQEAAAAAAAAAAAAAAAABAjEQESAhMpH/2gAIAQEABj8Cl508l/puqEiXw//EABwQAQADAAIDAAAAAAAAAAAAAAEAESEQMWGh0f/aAAgBAQABPyHqVSz6y/qBw1dTfMCMD3EyUzhB0Kl9x5l5MNFAVP/aAAwDAQACAAMAAAAQHy09/8QAGBEBAQEBAQAAAAAAAAAAAAAAAQARUWH/2gAIAQMBAT8QFBkNsKeF1W//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAECAQE/EFXV1C4f/8QAIBABAAICAQQDAAAAAAAAAAAAAQARMUEhUWFx0YGhsf/aAAgBAQABPxA5ZHZqbCPn7haVnl7hbq4q5uICxTeypcRndX5LhgHDEBTC9ThYhKtz72ZPmI05AOtT/9k=","sizes":"(max-width: 1366px) 100vw, 1366px","src":"/static/6fad548f956ab4ddb6a3c8147de0dea3/d8826/post.jpg","srcSet":"/static/6fad548f956ab4ddb6a3c8147de0dea3/f8f18/post.jpg 930w,\n/static/6fad548f956ab4ddb6a3c8147de0dea3/d8826/post.jpg 1366w"}}},"author":{"id":"Jonathan Creamer","bio":"Me","avatar":{"children":[{"fixed":{"src":"/static/7939bd0f614e75f5bf8544668e3f2971/f4032/me.jpg"}}]}}},"fields":{"layout":"post","slug":"/advanced-webpack-part-3-creating-a-custom-notifier-plugin/"}},"next":{"excerpt":"Typescript is a powerful way to build applications. It offers type checking to catch errors before they make it to the browser. On top of…","timeToRead":3,"frontmatter":{"title":"Testing typescript classes with Jest and Jest Mocks","tags":["typescript","testing","jest","mocking","oo","object oriented","jest mock",null],"date":"2017-04-12T00:00:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.5001531393568146,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFVlKVzOH//xAAZEAEAAwEBAAAAAAAAAAAAAAABAAIDESH/2gAIAQEAAQUCNvb6hDPRLIOvCNp//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREv/aAAgBAwEBPwHKIj//xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8BrKz/xAAbEAACAgMBAAAAAAAAAAAAAAAAASExAhARcf/aAAgBAQAGPwKaGsjqcelELX//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhQXGBof/aAAgBAQABPyHjjzsWS9EwjWkMc1LCiWXKWq+s/9oADAMBAAIAAwAAABD3D//EABcRAQADAAAAAAAAAAAAAAAAAAEQIVH/2gAIAQMBAT8QoXIP/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EBsh/8QAHBABAQACAwEBAAAAAAAAAAAAAREAITFBUYHR/9oACAEBAAE/EGAluMUde+4qfQhAG/zCR9EHoxCuE1JSA8YSgCDmV6caYocXQfHP/9k=","sizes":"(max-width: 3720px) 100vw, 3720px","src":"/static/b34fc0f901483950b8cfe03b8ad51760/45a11/thanos-sdcc.jpg","srcSet":"/static/b34fc0f901483950b8cfe03b8ad51760/f8f18/thanos-sdcc.jpg 930w,\n/static/b34fc0f901483950b8cfe03b8ad51760/0e6ff/thanos-sdcc.jpg 1860w,\n/static/b34fc0f901483950b8cfe03b8ad51760/45a11/thanos-sdcc.jpg 3720w,\n/static/b34fc0f901483950b8cfe03b8ad51760/90338/thanos-sdcc.jpg 4898w"}}},"author":{"id":"Jonathan Creamer","bio":"Me","avatar":{"children":[{"fixed":{"src":"/static/7939bd0f614e75f5bf8544668e3f2971/f4032/me.jpg"}}]}}},"fields":{"layout":"post","slug":"/testing-typescript-classes-with-jest-and-jest-mocks/"}},"primaryTag":"react"}}}